import requests
import os,sys
from requests.exceptions import ReadTimeout, HTTPError, RequestException

headers = {
	'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) \
	AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36'
}

def feasible(url):
	try:
		requests.get(url, headers=headers, timeout=2)
		f = open('good.txt', 'a')
		f.write(url+'\n')
		f.close()	
	except ReadTimeout:
		pass
	except HTTPError:
		pass
	except RequestException:
		pass


def main():
	i=1
	f1 = open(sys.argv[1], 'r')
	for url in f1:
		print("检测第"+str(i)+"个")
		feasible(url)
		i+=1
	print("检测完毕,共检测"+str(i-1)+"个")


main()
